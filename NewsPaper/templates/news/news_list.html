<!DOCTYPE html>
<html>
<head>
    <title>Новости</title>
</head>
<body>
    <h1>Новости (всего: {{ posts|length }})</h1>

    <!-- Простая навигация -->
    <div>
        {% if user.is_authenticated %}
            <p>Привет, {{ user.email }}!
            <a href="{% url 'account_logout' %}">Выйти</a></p>
        {% else %}
            <a href="{% url 'account_login' %}">Войти</a> |
            <a href="{% url 'account_signup' %}">Регистрация</a>
        {% endif %}
    </div>

    <hr>

    <!-- Список новостей -->
    <div>
        {% if posts %}
            {% for post in posts %}
            <div style="border: 1px solid #ccc; margin: 10px 0; padding: 10px;">
                <h3>{{ post.title }}</h3>
                <p>{{ post.text|truncatewords:20 }}</p>
                <p><small>
                    Автор: {% if post.author %}{{ post.author.username }}{% else %}Неизвестен{% endif %},
                    Дата: {{ post.created_at|date:"d.m.Y H:i" }}
                </small></p>
            </div>
            {% endfor %}
        {% else %}
            <p style="color: red;">НОВОСТЕЙ НЕТ, но в базе их 31! Проверьте шаблон.</p>
        {% endif %}
    </div>
</body>
</html>